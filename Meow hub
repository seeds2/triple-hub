--[[
    Meow's Ultimate Hub v2.2 – XENO-COMPATIBLE
    • VIP-Only Leaderboard + Hitbox Immunity + Anti-Launch Zone + **User Detector**
--]]
-- ===================== XENO COMPATIBILITY SHIM =====================
if not Drawing then
    local old = getrenv().Drawing
    if old then
        Drawing = old
    else
        Drawing = {new = function() return setmetatable({}, {__index = function() return function() end end}) end}
    end
end
local function safeDraw(fn, ...)
    return pcall(fn, ...)
end
-- =================================================================
local Players          = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService     = game:GetService("TweenService")
local RunService       = game:GetService("RunService")
local HttpService      = game:GetService("HttpService")
local Marketplace      = game:GetService("MarketplaceService")
local player   = Players.LocalPlayer
local playerGui= player:WaitForChild("PlayerGui")
local mouse    = player:GetMouse()
-- ====================== VIP CONFIG ======================
local VIP_USERS = {
    "zombifiedZan",        -- Main VIP
    -- "FriendUser1",
}
-- ====================== MAIN CONFIG ======================
local CONFIG = {
    SIDEWAYS_FORCE       = 350,
    UPWARD_FORCE         = 80,
    WALL_SLIDE_SPEED     = 16,
    DOUBLE_JUMP_COOLDOWN = 0.3,
    LAUNCH_COOLDOWN      = 0.2,
    HITBOX_SIZE          = 50,
    WALL_CHECK_DISTANCE  = 5,
    ANTI_LAUNCH_DISTANCE = 10,
    TOOLS = {"C4", "Grenade", "Throwing Knife"},
    LOCKON_SMOOTHNESS    = 0.15,
    LOCKON_FOV           = 30,
    LOCKON_KEY           = Enum.KeyCode.T
}
_G.HeadSize  = CONFIG.HITBOX_SIZE
_G.Disabled  = false
-- ====================== VIP-ONLY LEADERBOARD (Detects ALL Users) ======================
local LEADERBOARD = _G.MeowUsers or {}
_G.MeowUsers = LEADERBOARD
local PING_INTERVAL = 30
local LAST_PING = tick()
local function registerUser()
    local placeInfo = pcall(function()
        return Marketplace:GetProductInfo(game.PlaceId)
    end) and Marketplace:GetProductInfo(game.PlaceId) or {Name = "Unknown"}
    local entry = {
        Name       = player.Name,
        Display    = player.DisplayName,
        UserId     = player.UserId,
        Place      = game.PlaceId .. " – " .. placeInfo.Name,
        FirstSeen  = os.date("!%Y-%m-%dT%H:%M:%SZ"),
        LastSeen   = os.date("!%Y-%m-%dT%H:%M:%SZ"),
        IsVIP      = table.find(VIP_USERS, player.Name) ~= nil
    }
    LEADERBOARD[player.UserId] = entry
    print("[Meow Hub] Registered on leaderboard:", player.Name, "| VIP:", entry.IsVIP)
end
local function pingLeaderboard()
    if tick() - LAST_PING < PING_INTERVAL then return end
    LAST_PING = tick()
    if LEADERBOARD[player.UserId] then
        LEADERBOARD[player.UserId].LastSeen = os.date("!%Y-%m-%dT%H:%M:%SZ")
    end
end
registerUser()
task.spawn(function()
    while task.wait(PING_INTERVAL) do
        pcall(pingLeaderboard)
    end
end)
RunService.Heartbeat:Connect(function()
    for _, p in ipairs(Players:GetPlayers()) do
        if LEADERBOARD[p.UserId] and p ~= player then
            LEADERBOARD[p.UserId].LastSeen = os.date("!%Y-%m-%dT%H:%M:%SZ")
        end
    end
end)
-- =================================================================
-- ====================== STATES ======================
local states = {
    canDoubleJump = true,
    isWallSliding = false,
    guiVisible    = true,
    lastDoubleJump= 0,
    lastLaunch    = 0,
    isEquipped    = false,
    lockOn = {enabled = false, target = nil, fovCircle = nil},
    nearVIP       = false
}
local isVIP = table.find(VIP_USERS, player.Name) ~= nil
-- ====================== UTILS ======================
local function safeWait(t)
    local s = tick()
    repeat task.wait() until tick() - s >= t
end
local function notify(msg)
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title="Meow Hub", Text=msg, Duration=3
        })
    end)
end
-- ====================== VIP ANTI-LAUNCH DETECTION ======================
local antiLaunchConn
local function setupAntiLaunch()
    if antiLaunchConn then antiLaunchConn:Disconnect() end
    
    antiLaunchConn = RunService.Heartbeat:Connect(function()
        if isVIP then return end
        local char = player.Character
        if not char then return end
        local root = char:FindFirstChild("HumanoidRootPart")
        if not root then return end
        
        states.nearVIP = false
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= player and table.find(VIP_USERS, p.Name) and p.Character then
                local vipRoot = p.Character:FindFirstChild("HumanoidRootPart")
                if vipRoot then
                    local distance = (root.Position - vipRoot.Position).Magnitude
                    if distance <= CONFIG.ANTI_LAUNCH_DISTANCE then
                        states.nearVIP = true
                        break
                    end
                end
            end
        end
    end)
end
-- ====================== MOVEMENT ======================
local function launchSideways()
    if not isVIP and states.nearVIP then
        notify("Can't launch near VIP! (Stay back!)")
        return
    end
    
    if tick() - states.lastLaunch < CONFIG.LAUNCH_COOLDOWN then return end
    states.lastLaunch = tick()
    local char = player.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    local cam = workspace.CurrentCamera
    root.Velocity = (cam.CFrame.RightVector * (_G.SIDEWAYS_FORCE or CONFIG.SIDEWAYS_FORCE))
                  + Vector3.new(0, _G.UPWARD_FORCE or CONFIG.UPWARD_FORCE, 0)
end
local function performDoubleJump()
    if tick() - states.lastDoubleJump < CONFIG.DOUBLE_JUMP_COOLDOWN or not states.canDoubleJump then return end
    states.lastDoubleJump = tick()
    states.canDoubleJump = false
    local char = player.Character
    local hum  = char and char:FindFirstChildOfClass("Humanoid")
    if not hum then return end
    hum:ChangeState(Enum.HumanoidStateType.Jumping)
    safeWait(0.1)
    for _, tool in ipairs(player.Backpack:GetChildren()) do
        if table.find(CONFIG.TOOLS, tool.Name) and tool:FindFirstChild("RemoteEvent") then
            tool.Parent = char
            safeWait()
            hum:ChangeState(Enum.HumanoidStateType.Freefall)
            safeWait(0.1)
            hum:ChangeState(Enum.HumanoidStateType.Jumping)
            if tool.Name == "C4" then
                tool.RemoteEvent:FireServer(mouse.Hit.LookVector)
            else
                tool:Activate()
            end
            tool.Parent = player.Backpack
        end
    end
    task.delay(CONFIG.DOUBLE_JUMP_COOLDOWN, function() states.canDoubleJump = true end)
end
local function isTouchingWall(root)
    local params = RaycastParams.new()
    params.FilterType = Enum.RaycastFilterType.Blacklist
    params.FilterDescendantsInstances = {root.Parent}
    return workspace:Raycast(root.Position + Vector3.new(0,2,0), root.CFrame.LookVector * CONFIG.WALL_CHECK_DISTANCE, params) ~= nil
end
local wallConn
local function setupWallslide(char)
    if wallConn then wallConn:Disconnect() end
    local hum  = char:WaitForChild("Humanoid")
    local root = char:WaitForChild("HumanoidRootPart")
    wallConn = RunService.RenderStepped:Connect(function()
        if hum:GetState() == Enum.HumanoidStateType.Freefall and isTouchingWall(root) and not states.isWallSliding then
            states.isWallSliding = true
            root.Velocity = Vector3.new(root.CFrame.RightVector.X * CONFIG.WALL_SLIDE_SPEED,
                                        root.Velocity.Y,
                                        root.CFrame.RightVector.Z * CONFIG.WALL_SLIDE_SPEED)
        elseif not isTouchingWall(root) or hum:GetState() ~= Enum.HumanoidStateType.Freefall then
            states.isWallSliding = false
        end
    end)
end
-- ====================== VISUALS (VIP IMMUNITY) ======================
RunService.RenderStepped:Connect(function()
    if _G.Disabled then return end
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player and p.Character then
            local hrp = p.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                if table.find(VIP_USERS, p.Name) then
                    pcall(function()
                        hrp.Size = Vector3.new(2, 2, 1)
                        hrp.Transparency = 0
                        hrp.BrickColor = BrickColor.new("Medium stone grey")
                        hrp.Material = Enum.Material.Plastic
                        hrp.CanCollide = true
                    end)
                else
                    pcall(function()
                        hrp.Size         = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
                        hrp.Transparency = 0.7
                        hrp.BrickColor   = BrickColor.new("Really red")
                        hrp.Material     = Enum.Material.Neon
                        hrp.CanCollide   = false
                    end)
                end
            end
        end
    end
end)
-- ====================== TOOL & INPUT ======================
local function handleTool(char)
    char.ChildAdded:Connect(function(tool)
        if tool.Name == "Throwing Knife" then
            tool.Equipped:Connect(function() states.isEquipped = true end)
            tool.Unequipped:Connect(function() states.isEquipped = false end)
        end
    end)
end
local mobileBtn
local function createMobileBtn()
    if UserInputService.TouchEnabled and not mobileBtn then
        mobileBtn = Instance.new("TextButton")
        mobileBtn.Size = UDim2.new(0,120,0,50)
        mobileBtn.Position = UDim2.new(1,-130,1,-70)
        mobileBtn.Text = "Double Jump"
        mobileBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
        mobileBtn.TextColor3 = Color3.new(1,1,1)
        mobileBtn.Font = Enum.Font.GothamBold
        mobileBtn.Parent = playerGui
        mobileBtn.MouseButton1Click:Connect(performDoubleJump)
    end
end
local inputConn
local function setupInput()
    if inputConn then inputConn:Disconnect() end
    inputConn = UserInputService.InputBegan:Connect(function(i,p)
        if p then return end
        if i.KeyCode == Enum.KeyCode.Space and states.isEquipped then
            launchSideways()
        end
    end)
end
-- ====================== LOCK-ON (VIP IMMUNITY) ======================
local function createFOV()
    local c = Drawing.new("Circle")
    c.Radius = CONFIG.LOCKON_FOV
    c.Color  = Color3.fromRGB(255,0,0)
    c.Thickness = 2
    c.Filled = false
    c.Transparency = 1
    c.Visible = false
    return c
end
local function findPlayer(name)
    name = name:lower()
    for _, p in ipairs(Players:GetPlayers()) do
        if p.Name:lower():find(name,1,true) or p.DisplayName:lower():find(name,1,true) then
            return p
        end
    end
end
local function updateLock()
    if not states.lockOn.enabled or not states.lockOn.target or not states.lockOn.target.Character then
        states.lockOn.enabled = false
        if states.lockOn.fovCircle then states.lockOn.fovCircle.Visible = false end
        return
    end
    if not isVIP and table.find(VIP_USERS, states.lockOn.target.Name) then
        states.lockOn.enabled = false
        states.lockOn.target = nil
        if states.lockOn.fovCircle then states.lockOn.fovCircle.Visible = false end
        notify("Can't lock onto VIP!")
        return
    end
    local char = states.lockOn.target.Character
    local hrp  = char:FindFirstChild("HumanoidRootPart")
    local head = char:FindFirstChild("Head")
    if not hrp or not head then return end
    local sp, onScreen = workspace.CurrentCamera:WorldToViewportPoint(hrp.Position)
    if onScreen then
        safeDraw(function()
            states.lockOn.fovCircle.Position = Vector2.new(sp.X, sp.Y)
            states.lockOn.fovCircle.Visible = true
        end)
        local targetCF = CFrame.new(workspace.CurrentCamera.CFrame.Position, head.Position)
        workspace.CurrentCamera.CFrame = workspace.CurrentCamera.CFrame:Lerp(targetCF, CONFIG.LOCKON_SMOOTHNESS)
    else
        if states.lockOn.fovCircle then states.lockOn.fovCircle.Visible = false end
    end
end
-- ====================== GUI ======================
local screen = Instance.new("ScreenGui", playerGui)
screen.Name = "MeowHub"
screen.ResetOnSpawn = false
local main = Instance.new("Frame", screen)
main.Size = UDim2.new(0,480,0,400)
main.Position = UDim2.new(0.5,-240,0.5,-200)
main.BackgroundColor3 = Color3.fromRGB(20,20,26)
main.BackgroundTransparency = 0.05
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,16)
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,45)
title.BackgroundTransparency = 1
title.Text = "Meow's Ultimate Hub v2.2"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 26
-- Tabs
local tabs = {"Movement","Visuals","Weapons","Lock-On"}
if isVIP then table.insert(tabs,"VIP") end
local current = "Movement"
local frames, buttons = {},{}
for i, name in ipairs(tabs) do
    local btn = Instance.new("TextButton", main)
    btn.Size = UDim2.new(0,90,0,35)
    btn.Position = UDim2.new(0,15+(i-1)*95,0,50)
    btn.BackgroundColor3 = current==name and Color3.fromRGB(0,170,255) or Color3.fromRGB(38,38,48)
    btn.Text = name
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 15
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,8)
    btn.MouseButton1Click:Connect(function()
        current = name
        for _,b in pairs(buttons) do b.BackgroundColor3 = Color3.fromRGB(38,38,48) end
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)
        for _,f in pairs(frames) do f.Visible = false end
        frames[name].Visible = true
    end)
    buttons[name] = btn
    local frame = Instance.new("Frame", main)
    frame.Size = UDim2.new(1,-20,1,-95)
    frame.Position = UDim2.new(0,10,0,90)
    frame.BackgroundTransparency = 1
    frame.Visible = i==1
    frames[name] = frame
end
-- Slider helper
local function slider(label,def,minn,maxx,cb,y,parent)
    local f = Instance.new("Frame",parent)
    f.Size = UDim2.new(1,0,0,45)
    f.Position = UDim2.new(0,0,0,y)
    f.BackgroundTransparency = 1
    local l = Instance.new("TextLabel",f)
    l.Size = UDim2.new(0.4,0,1,0)
    l.Text = label..": "..def
    l.TextColor3 = Color3.new(1,1,1)
    l.TextXAlignment = Enum.TextXAlignment.Left
    local box = Instance.new("TextBox",f)
    box.Size = UDim2.new(0.25,0,0.7,0)
    box.Position = UDim2.new(0.45,0,0.15,0)
    box.BackgroundColor3 = Color3.fromRGB(50,50,60)
    box.Text = tostring(def)
    box.FocusLost:Connect(function()
        local v = math.clamp(tonumber(box.Text) or def, minn, maxx)
        box.Text = v
        l.Text = label..": "..v
        cb(v)
    end)
end
-- Movement Tab
slider("Sideways Force",CONFIG.SIDEWAYS_FORCE,0,1000,function(v)_G.SIDEWAYS_FORCE=v end,5,frames["Movement"])
slider("Upward Force",CONFIG.UPWARD_FORCE,0,500,function(v)_G.UPWARD_FORCE=v end,55,frames["Movement"])
if not isVIP then
    slider("Anti-Launch Distance",CONFIG.ANTI_LAUNCH_DISTANCE,5,50,function(v)CONFIG.ANTI_LAUNCH_DISTANCE=v end,105,frames["Movement"])
end
-- Visuals Tab
local hitboxBtn = Instance.new("TextButton",frames["Visuals"])
hitboxBtn.Size = UDim2.new(1,0,0,40)
hitboxBtn.Position = UDim2.new(0,0,0,5)
hitboxBtn.Text = "Hitboxes: ON"
hitboxBtn.BackgroundColor3 = Color3.fromRGB(0,200,100)
hitboxBtn.MouseButton1Click:Connect(function()
    _G.Disabled = not _G.Disabled
    hitboxBtn.Text = _G.Disabled and "OFF" or "ON"
    hitboxBtn.BackgroundColor3 = _G.Disabled and Color3.fromRGB(200,50,50) or Color3.fromRGB(0,200,100)
end)
slider("Hitbox Size",CONFIG.HITBOX_SIZE,10,200,function(v)_G.HeadSize=v end,55,frames["Visuals"])
-- Weapons Tab
local function spawnWeapon(name)
    local menu = playerGui:FindFirstChild("Menu Screen")
    if menu and menu:FindFirstChild("RemoteEvent") then
        menu.RemoteEvent:FireServer(name)
        menu:Destroy()
    end
end
local blood = Instance.new("TextButton",frames["Weapons"])
blood.Size = UDim2.new(0.48,0,0,50)
blood.Position = UDim2.new(0,5,0,5)
blood.Text = "Blood Dagger"
blood.BackgroundColor3 = Color3.fromRGB(200,50,50)
blood.MouseButton1Click:Connect(function() spawnWeapon("Blood Dagger") end)
local emerald = Instance.new("TextButton",frames["Weapons"])
emerald.Size = UDim2.new(0.48,0,0,50)
emerald.Position = UDim2.new(0.52,0,0,5)
emerald.Text = "Emerald Greatsword"
emerald.BackgroundColor3 = Color3.fromRGB(0,200,100)
emerald.MouseButton1Click:Connect(function() spawnWeapon("Emerald Greatsword") end)
-- Lock-On Tab
local lockFrame = frames["Lock-On"]
local inputBox = Instance.new("TextBox",lockFrame)
inputBox.Size = UDim2.new(0.7,0,0,35)
inputBox.Position = UDim2.new(0.15,0,0,10)
inputBox.PlaceholderText = "Username..."
inputBox.BackgroundColor3 = Color3.fromRGB(50,50,60)
local lockBtn = Instance.new("TextButton",lockFrame)
lockBtn.Size = UDim2.new(0.25,0,0,35)
lockBtn.Position = UDim2.new(0.73,-5,0,10)
lockBtn.Text = "Lock"
lockBtn.BackgroundColor3 = Color3.fromRGB(0,170,255)
lockBtn.MouseButton1Click:Connect(function()
    local n = inputBox.Text:gsub("^%s*(.-)%s*$","%1")
    if n == "" then return end
    local t = findPlayer(n)
    if t then
        if not isVIP and table.find(VIP_USERS, t.Name) then
            notify("Can't lock onto VIP!")
            return
        end
        states.lockOn.target = t
        states.lockOn.enabled = true
        notify("Locked: "..t.DisplayName)
    else
        notify("Player not found!")
    end
end)
-- VIP Tab (User Detector)
if isVIP then
    local vip = frames["VIP"]
    local vtitle = Instance.new("TextLabel", vip)
    vtitle.Size = UDim2.new(1, 0, 0, 40)
    vtitle.Position = UDim2.new(0, 0, 0, 10)
    vtitle.BackgroundTransparency = 1
    vtitle.Text = "VIP Access: " .. player.Name
    vtitle.TextColor3 = Color3.fromRGB(255, 215, 0)
    vtitle.Font = Enum.Font.GothamBold
    vtitle.TextSize = 20

    -- USER DETECTOR
    local detectBox = Instance.new("TextBox", vip)
    detectBox.Size = UDim2.new(0.7, 0, 0, 35)
    detectBox.Position = UDim2.new(0.15, 0, 0, 60)
    detectBox.PlaceholderText = "Username to check..."
    detectBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    detectBox.TextColor3 = Color3.new(1, 1, 1)

    local detectBtn = Instance.new("TextButton", vip)
    detectBtn.Size = UDim2.new(0.25, 0, 0, 35)
    detectBtn.Position = UDim2.new(0.73, -5, 0, 60)
    detectBtn.Text = "Check"
    detectBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    
    local resultLabel = Instance.new("TextLabel", vip)
    resultLabel.Size = UDim2.new(1, -20, 0, 60)
    resultLabel.Position = UDim2.new(0, 10, 0, 105)
    resultLabel.BackgroundTransparency = 1
    resultLabel.Text = ""
    resultLabel.TextColor3 = Color3.new(1, 1, 1)
    resultLabel.Font = Enum.Font.Gotham
    resultLabel.TextSize = 16
    resultLabel.TextWrapped = true
    resultLabel.TextXAlignment = Enum.TextXAlignment.Left

    detectBtn.MouseButton1Click:Connect(function()
        local name = detectBox.Text:gsub("^%s*(.-)%s*$", "%1")
        if name == "" then
            resultLabel.Text = "Warning: Enter a username!"
            resultLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
            return
        end

        local target = findPlayer(name)
        if not target then
            resultLabel.Text = "Error: Player not found in game."
            resultLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
            return
        end

        local entry = LEADERBOARD[target.UserId]
        if entry then
            local lastSeen = entry.LastSeen:sub(12, 16) -- HH:MM
            resultLabel.Text = "Success: " .. target.DisplayName .. " is using Meow Hub!\nLast seen: " .. lastSeen .. " UTC"
            resultLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        else
            resultLabel.Text = "Error: " .. target.DisplayName .. " is NOT using Meow Hub."
            resultLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
    end)

    -- Optional: Auto-refresh result if player joins/leaves
    Players.PlayerAdded:Connect(function(p)
        if p == player then return end
        task.wait(1)
        if detectBox.Text ~= "" and (p.DisplayName:lower():find(detectBox.Text:lower()) or p.Name:lower():find(detectBox.Text:lower())) then
            detectBtn.MouseButton1Click:Fire()
        end
    end)
end
-- Toggle button
local toggle = Instance.new("TextButton", screen)
toggle.Size = UDim2.new(0,60,0,30)
toggle.Position = UDim2.new(0,20,0,20)
toggle.BackgroundColor3 = Color3.fromRGB(255,80,80)
toggle.Text = "Meow"
toggle.TextColor3 = Color3.new(1,1,1)
toggle.Font = Enum.Font.GothamBold
toggle.MouseButton1Click:Connect(function()
    states.guiVisible = not states.guiVisible
    main.Visible = states.guiVisible
end)
Instance.new("UICorner",toggle).CornerRadius = UDim.new(0,15)
-- ====================== VIP-ONLY LEADERBOARD GUI ======================
local function createLeaderboard()
    if not isVIP then
        notify("Leaderboard is VIP-only!")
        return
    end
    local lbGui = Instance.new("ScreenGui", playerGui)
    lbGui.Name = "MeowLeaderboard"
    lbGui.ResetOnSpawn = false
    local frame = Instance.new("Frame", lbGui)
    frame.Size = UDim2.new(0, 380, 0, 440)
    frame.Position = UDim2.new(0, 20, 0, 120)
    frame.BackgroundColor3 = Color3.fromRGB(20,20,26)
    frame.BackgroundTransparency = 0.05
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)
    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1,0,0,40)
    title.BackgroundTransparency = 1
    title.Text = "Meow Hub Users ("..#LEADERBOARD..")"
    title.TextColor3 = Color3.new(1,1,1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 20
    local close = Instance.new("TextButton", frame)
    close.Size = UDim2.new(0,30,0,30)
    close.Position = UDim2.new(1,-35,0,5)
    close.Text = "X"
    close.BackgroundColor3 = Color3.fromRGB(200,50,50)
    close.TextColor3 = Color3.new(1,1,1)
    close.MouseButton1Click:Connect(function() lbGui:Destroy() end)
    local scroll = Instance.new("ScrollingFrame", frame)
    scroll.Size = UDim2.new(1,-10,1,-50)
    scroll.Position = UDim2.new(0,5,0,45)
    scroll.BackgroundTransparency = 1
    scroll.ScrollBarThickness = 6
    scroll.CanvasSize = UDim2.new(0,0,0,0)
    local layout = Instance.new("UIListLayout", scroll)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Padding = UDim.new(0,4)
    local function refresh()
        for _,v in pairs(scroll:GetChildren()) do
            if v:IsA("Frame") then v:Destroy() end
        end
        local i = 0
        for _,entry in pairs(LEADERBOARD) do
            i += 1
            local row = Instance.new("Frame", scroll)
            row.Size = UDim2.new(1,0,0,50)
            row.BackgroundColor3 = entry.IsVIP and Color3.fromRGB(60,45,80) or Color3.fromRGB(35,35,45)
            Instance.new("UICorner", row).CornerRadius = UDim.new(0,6)
            local vipTag = Instance.new("TextLabel", row)
            vipTag.Size = UDim2.new(0,40,1,0)
            vipTag.Text = entry.IsVIP and "VIP" or ""
            vipTag.TextColor3 = Color3.fromRGB(255,215,0)
            vipTag.Font = Enum.Font.GothamBold
            vipTag.BackgroundTransparency = 1
            vipTag.TextXAlignment = Enum.TextXAlignment.Left
            vipTag.Position = UDim2.new(0,8,0,0)
            local name = Instance.new("TextLabel", row)
            name.Size = UDim2.new(0.4,0,1,0)
            name.Position = UDim2.new(0.12,0,0,0)
            name.Text = entry.Display .. " (@"..entry.Name..")"
            name.TextColor3 = Color3.new(1,1,1)
            name.Font = Enum.Font.Gotham
            name.TextXAlignment = Enum.TextXAlignment.Left
            name.BackgroundTransparency = 1
            local id = Instance.new("TextLabel", row)
            id.Size = UDim2.new(0.25,0,1,0)
            id.Position = UDim2.new(0.52,0,0,0)
            id.Text = "ID: "..entry.UserId
            id.TextColor3 = Color3.fromRGB(180,180,180)
            id.Font = Enum.Font.Gotham
            id.BackgroundTransparency = 1
            local time = Instance.new("TextLabel", row)
            time.Size = UDim2.new(0.23,0,1,0)
            time.Position = UDim2.new(0.77,0,0,0)
            time.Text = entry.LastSeen:sub(12,16)
            time.TextColor3 = Color3.fromRGB(100,255,100)
            time.Font = Enum.Font.Gotham
            time.BackgroundTransparency = 1
        end
        scroll.CanvasSize = UDim2.new(0,0,0, i*54)
        title.Text = "Meow Hub Users ("..i..")"
    end
    refresh()
    task.spawn(function()
        while lbGui.Parent do
            task.wait(10)
            if lbGui.Parent then refresh() end
        end
    end)
end
-- Leaderboard access (F9 or LB button) – VIP only
UserInputService.InputBegan:Connect(function(inp, gp)
    if gp then return end
    if inp.KeyCode == Enum.KeyCode.F9 then
        if playerGui:FindFirstChild("MeowLeaderboard") then
            playerGui.MeowLeaderboard:Destroy()
        else
            createLeaderboard()
        end
    end
end)
local lbBtn = Instance.new("TextButton", screen)
lbBtn.Size = UDim2.new(0,60,0,30)
lbBtn.Position = UDim2.new(0,90,0,20)
lbBtn.BackgroundColor3 = Color3.fromRGB(80,180,255)
lbBtn.Text = "LB"
lbBtn.TextColor3 = Color3.new(1,1,1)
lbBtn.Font = Enum.Font.GothamBold
Instance.new("UICorner", lbBtn).CornerRadius = UDim.new(0,12)
lbBtn.MouseButton1Click:Connect(function()
    if playerGui:FindFirstChild("MeowLeaderboard") then
        playerGui.MeowLeaderboard:Destroy()
    else
        createLeaderboard()
    end
end)
-- ====================== INIT ======================
local function onCharAdded(char)
    safeWait(1)
    states.canDoubleJump = true
    states.isWallSliding = false
    states.isEquipped = false
    states.nearVIP = false
    handleTool(char)
    setupWallslide(char)
    setupAntiLaunch()
    setupInput()
    createMobileBtn()
end
player.CharacterAdded:Connect(onCharAdded)
if player.Character then onCharAdded(player.Character) end
states.lockOn.fovCircle = createFOV()
RunService.RenderStepped:Connect(updateLock)
UserInputService.InputBegan:Connect(function(i)
    if i.KeyCode == CONFIG.LOCKON_KEY and states.lockOn.target then
        states.lockOn.enabled = not states.lockOn.enabled
        if states.lockOn.fovCircle then states.lockOn.fovCircle.Visible = states.lockOn.enabled end
    end
end)
task.wait(2)
main.Visible = true
toggle.Visible = true
notify("Meow Hub v2.2 Loaded! "..(isVIP and "VIP (User Detector!)" or "Standard"))
print("Xeno-Ready | User Detector Active | Total Control")
